

<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Class ProjectionDefectSplitter &mdash; larflow 0.0.1 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/collapsible-lists/css/tree_view.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script type="text/javascript" src="../_static/collapsible-lists/js/CollapsibleLists.compressed.js"></script>
        <script type="text/javascript" src="../_static/collapsible-lists/js/apply-collapsible-lists.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Class PyLArFlow" href="classlarflow_1_1reco_1_1PyLArFlow.html" />
    <link rel="prev" title="Class NuVertexMaker" href="classlarflow_1_1reco_1_1NuVertexMaker.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> larflow
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="library_root.html">Library API</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">larflow</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="library_root.html">Library API</a> &raquo;</li>
        
      <li>Class ProjectionDefectSplitter</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/api/classlarflow_1_1reco_1_1ProjectionDefectSplitter.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="class-projectiondefectsplitter">
<span id="exhale-class-classlarflow-1-1reco-1-1projectiondefectsplitter"></span><h1>Class ProjectionDefectSplitter<a class="headerlink" href="#class-projectiondefectsplitter" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li>Defined in <a class="reference internal" href="file_larflow_Reco_ProjectionDefectSplitter.h.html#file-larflow-reco-projectiondefectsplitter-h"><span class="std std-ref">File ProjectionDefectSplitter.h</span></a></li>
</ul>
<div class="section" id="inheritance-relationships">
<h2>Inheritance Relationships<a class="headerlink" href="#inheritance-relationships" title="Permalink to this headline">¶</a></h2>
<div class="section" id="base-type">
<h3>Base Type<a class="headerlink" href="#base-type" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">public</span> <span class="pre">larcv_base</span></code></li>
</ul>
</div>
</div>
<div class="section" id="class-documentation">
<h2>Class Documentation<a class="headerlink" href="#class-documentation" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="_CPPv4N7larflow4reco24ProjectionDefectSplitterE">
<span id="_CPPv3N7larflow4reco24ProjectionDefectSplitterE"></span><span id="_CPPv2N7larflow4reco24ProjectionDefectSplitterE"></span><span id="larflow::reco::ProjectionDefectSplitter"></span><span class="target" id="classlarflow_1_1reco_1_1ProjectionDefectSplitter"></span><em class="property">class </em><code class="descname">ProjectionDefectSplitter</code> : <em class="property">public</em> larcv_base<a class="headerlink" href="#_CPPv4N7larflow4reco24ProjectionDefectSplitterE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Splits 3D clusters by projecting into 2D and breaking cluster based on cluster defect points. </p>
<p>This is a way to try and produce very straight clusters, which we can then piece back together to make tracks. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Functions</p>
<dl class="function">
<dt id="_CPPv4N7larflow4reco24ProjectionDefectSplitter24ProjectionDefectSplitterEv">
<span id="_CPPv3N7larflow4reco24ProjectionDefectSplitter24ProjectionDefectSplitterEv"></span><span id="_CPPv2N7larflow4reco24ProjectionDefectSplitter24ProjectionDefectSplitterEv"></span><span id="larflow::reco::ProjectionDefectSplitter::ProjectionDefectSplitter"></span><span class="target" id="classlarflow_1_1reco_1_1ProjectionDefectSplitter_1ad29c35d60844dc7406e1d7bb0bf8b79f"></span><code class="descname">ProjectionDefectSplitter</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N7larflow4reco24ProjectionDefectSplitter24ProjectionDefectSplitterEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>default construct </p>
</dd></dl>

<dl class="function">
<dt id="_CPPv4N7larflow4reco24ProjectionDefectSplitterD0Ev">
<span id="_CPPv3N7larflow4reco24ProjectionDefectSplitterD0Ev"></span><span id="_CPPv2N7larflow4reco24ProjectionDefectSplitterD0Ev"></span><span id="larflow::reco::ProjectionDefectSplitter::~ProjectionDefectSplitter"></span><span class="target" id="classlarflow_1_1reco_1_1ProjectionDefectSplitter_1ab6ed644304e470180b46e53e4e2a8e15"></span><em class="property">virtual</em> <code class="descname">~ProjectionDefectSplitter</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N7larflow4reco24ProjectionDefectSplitterD0Ev" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="function">
<dt id="_CPPv4N7larflow4reco24ProjectionDefectSplitter7processERN5larcv9IOManagerERN7larlite15storage_managerE">
<span id="_CPPv3N7larflow4reco24ProjectionDefectSplitter7processERN5larcv9IOManagerERN7larlite15storage_managerE"></span><span id="_CPPv2N7larflow4reco24ProjectionDefectSplitter7processERN5larcv9IOManagerERN7larlite15storage_managerE"></span><span id="larflow::reco::ProjectionDefectSplitter::process__larcv::IOManagerR.larlite::storage_managerR"></span><span class="target" id="classlarflow_1_1reco_1_1ProjectionDefectSplitter_1a11b3c747fce1938cd5beb583411995b0"></span>void <code class="descname">process</code><span class="sig-paren">(</span>larcv::IOManager &amp;<em>iolc</em>, larlite::storage_manager &amp;<em>ioll</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N7larflow4reco24ProjectionDefectSplitter7processERN5larcv9IOManagerERN7larlite15storage_managerE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>run algorithm on LArCV/larlite data products for current event </p>
<p>Expects the following input data products: <ul class="simple">
<li>larflow3dhits in ioll from tree name stored in _input_lfhit_tree_name: These are the hits we will cluster</li>
<li>wire images from larcv tree named “wire”: will use these images to do 2D contour analysis</li>
</ul>
</p>
<p>Produces the following output products: <ul class="simple">
<li>larflowcluster stored in tree _output_cluster_tree_name: the clusters formed by dbscan and split with contour defect analysis</li>
<li>pcaxis stored in tree named _output_cluster_tree_name: the principle components of the clusters made</li>
<li>larflow3dhit container named “projsplitnoise”: all the hits that were not clustered.</li>
</ul>
</p>
<p><dl class="docutils">
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal notranslate"><span class="pre">iolcv</span></code>: LArCV IO manager </li>
<li><code class="docutils literal notranslate"><span class="pre">ioll</span></code>: larlite IO manager </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv4N7larflow4reco24ProjectionDefectSplitter14split_clustersERNSt6vectorI9cluster_tEERKNSt6vectorIN5larcv7Image2DEEEKf">
<span id="_CPPv3N7larflow4reco24ProjectionDefectSplitter14split_clustersERNSt6vectorI9cluster_tEERKNSt6vectorIN5larcv7Image2DEEEKf"></span><span id="_CPPv2N7larflow4reco24ProjectionDefectSplitter14split_clustersERNSt6vectorI9cluster_tEERKNSt6vectorIN5larcv7Image2DEEEKf"></span><span id="larflow::reco::ProjectionDefectSplitter::split_clusters__std::vector:cluster_t:R.std::vector:larcv::Image2D:CR.floatC"></span><span class="target" id="classlarflow_1_1reco_1_1ProjectionDefectSplitter_1a6d1354503649ab9fc291408f0146ea53"></span>int <code class="descname">split_clusters</code><span class="sig-paren">(</span>std::vector&lt;<a class="reference internal" href="structlarflow_1_1reco_1_1cluster__t.html#_CPPv4N7larflow4reco9cluster_tE" title="larflow::reco::cluster_t">cluster_t</a>&gt; &amp;<em>cluster_v</em>, <em class="property">const</em> std::vector&lt;larcv::Image2D&gt; &amp;<em>adc_v</em>, <em class="property">const</em> float <em>min_second_pca_len</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N7larflow4reco24ProjectionDefectSplitter14split_clustersERNSt6vectorI9cluster_tEERKNSt6vectorIN5larcv7Image2DEEEKf" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>split clusters using 2D contours. </p>
<p>Is a static function, allowing other routines to use this algorithm.</p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd>The number of times a cluster was split </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal notranslate"><span class="pre">cluster_v</span></code>: Vector of space point clusters </li>
<li><code class="docutils literal notranslate"><span class="pre">adc_v</span></code>: Wire plane images we will project space points into. Will do defect analysis on these 2D images. </li>
<li><code class="docutils literal notranslate"><span class="pre">min_second_pca_len</span></code>: Minimum second PC axis eigenvalue to perform split. Else returns cluster as is. </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv4N7larflow4reco24ProjectionDefectSplitter31set_input_larmatchhit_tree_nameENSt6stringE">
<span id="_CPPv3N7larflow4reco24ProjectionDefectSplitter31set_input_larmatchhit_tree_nameENSt6stringE"></span><span id="_CPPv2N7larflow4reco24ProjectionDefectSplitter31set_input_larmatchhit_tree_nameENSt6stringE"></span><span id="larflow::reco::ProjectionDefectSplitter::set_input_larmatchhit_tree_name__ss"></span><span class="target" id="classlarflow_1_1reco_1_1ProjectionDefectSplitter_1ac8dacdedfe8877b8df65542a5021e1e5"></span>void <code class="descname">set_input_larmatchhit_tree_name</code><span class="sig-paren">(</span>std::string <em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N7larflow4reco24ProjectionDefectSplitter31set_input_larmatchhit_tree_nameENSt6stringE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>set name of tree with larflow3dhit instnces to cluster </p>
</dd></dl>

<dl class="function">
<dt id="_CPPv4N7larflow4reco24ProjectionDefectSplitter20set_output_tree_nameENSt6stringE">
<span id="_CPPv3N7larflow4reco24ProjectionDefectSplitter20set_output_tree_nameENSt6stringE"></span><span id="_CPPv2N7larflow4reco24ProjectionDefectSplitter20set_output_tree_nameENSt6stringE"></span><span id="larflow::reco::ProjectionDefectSplitter::set_output_tree_name__ss"></span><span class="target" id="classlarflow_1_1reco_1_1ProjectionDefectSplitter_1a034d43808e0d0072281f7b871d10aa4e"></span>void <code class="descname">set_output_tree_name</code><span class="sig-paren">(</span>std::string <em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N7larflow4reco24ProjectionDefectSplitter20set_output_tree_nameENSt6stringE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>set name of the tree to write output clusters </p>
</dd></dl>

<dl class="function">
<dt id="_CPPv4N7larflow4reco24ProjectionDefectSplitter22set_min_larmatch_scoreEf">
<span id="_CPPv3N7larflow4reco24ProjectionDefectSplitter22set_min_larmatch_scoreEf"></span><span id="_CPPv2N7larflow4reco24ProjectionDefectSplitter22set_min_larmatch_scoreEf"></span><span id="larflow::reco::ProjectionDefectSplitter::set_min_larmatch_score__float"></span><span class="target" id="classlarflow_1_1reco_1_1ProjectionDefectSplitter_1ac2cc5388d2c814a522107eb1fd8ed729"></span>void <code class="descname">set_min_larmatch_score</code><span class="sig-paren">(</span>float <em>min_score</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N7larflow4reco24ProjectionDefectSplitter22set_min_larmatch_scoreEf" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>set minimum larmatch score must have to be included in clusters </p>
</dd></dl>

<dl class="function">
<dt id="_CPPv4N7larflow4reco24ProjectionDefectSplitter15set_dbscan_parsEfii">
<span id="_CPPv3N7larflow4reco24ProjectionDefectSplitter15set_dbscan_parsEfii"></span><span id="_CPPv2N7larflow4reco24ProjectionDefectSplitter15set_dbscan_parsEfii"></span><span id="larflow::reco::ProjectionDefectSplitter::set_dbscan_pars__float.i.i"></span><span class="target" id="classlarflow_1_1reco_1_1ProjectionDefectSplitter_1a632fd297e0b6a513e89935662e80eb41"></span>void <code class="descname">set_dbscan_pars</code><span class="sig-paren">(</span>float <em>maxdist</em>, int <em>minsize</em>, int <em>maxkd</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N7larflow4reco24ProjectionDefectSplitter15set_dbscan_parsEfii" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>set the dbscan parameters for clustering </p>
<p><dl class="docutils">
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal notranslate"><span class="pre">maxdist</span></code>: maximum distance two spacepoints can be connected for dbscan </li>
<li><code class="docutils literal notranslate"><span class="pre">minsize</span></code>: minimum cluster size for dbscan </li>
<li><code class="docutils literal notranslate"><span class="pre">maxkd</span></code>: max number of neighbors per spaecepoint for dbscan </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Protected Functions</p>
<dl class="function">
<dt id="_CPPv4N7larflow4reco24ProjectionDefectSplitter19_makeLArFlowClusterER9cluster_tRKN7larlite18event_larflow3dhitE">
<span id="_CPPv3N7larflow4reco24ProjectionDefectSplitter19_makeLArFlowClusterER9cluster_tRKN7larlite18event_larflow3dhitE"></span><span id="_CPPv2N7larflow4reco24ProjectionDefectSplitter19_makeLArFlowClusterER9cluster_tRKN7larlite18event_larflow3dhitE"></span><span id="larflow::reco::ProjectionDefectSplitter::_makeLArFlowCluster__cluster_tR.larlite::event_larflow3dhitCR"></span><span class="target" id="classlarflow_1_1reco_1_1ProjectionDefectSplitter_1abdec9a606e384dcf9d6d0e2518b8ab7d"></span>larlite::larflowcluster <code class="descname">_makeLArFlowCluster</code><span class="sig-paren">(</span><a class="reference internal" href="structlarflow_1_1reco_1_1cluster__t.html#_CPPv4N7larflow4reco9cluster_tE" title="larflow::reco::cluster_t">cluster_t</a> &amp;<em>cluster</em>, <em class="property">const</em> larlite::event_larflow3dhit &amp;<em>source_lfhit_v</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N7larflow4reco24ProjectionDefectSplitter19_makeLArFlowClusterER9cluster_tRKN7larlite18event_larflow3dhitE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>convert <a class="reference internal" href="structlarflow_1_1reco_1_1cluster__t.html#structlarflow_1_1reco_1_1cluster__t"><span class="std std-ref">cluster_t</span></a> instance into a larflowcluster instance </p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd>A larflowcluster instance made from the input <a class="reference internal" href="structlarflow_1_1reco_1_1cluster__t.html#structlarflow_1_1reco_1_1cluster__t"><span class="std std-ref">cluster_t</span></a> instance </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal notranslate"><span class="pre">cluster</span></code>: A <a class="reference internal" href="structlarflow_1_1reco_1_1cluster__t.html#structlarflow_1_1reco_1_1cluster__t"><span class="std std-ref">cluster_t</span></a> cluster of spacepoints </li>
<li><code class="docutils literal notranslate"><span class="pre">source_lfhit_v</span></code>: The original set of hits used to make the given cluster. The info form the hits are copied into the larflowcluster. </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv4N7larflow4reco24ProjectionDefectSplitter19_absorb_nearby_hitsERK9cluster_tRKNSt6vectorIN7larlite12larflow3dhitEEERNSt6vectorIiEEf">
<span id="_CPPv3N7larflow4reco24ProjectionDefectSplitter19_absorb_nearby_hitsERK9cluster_tRKNSt6vectorIN7larlite12larflow3dhitEEERNSt6vectorIiEEf"></span><span id="_CPPv2N7larflow4reco24ProjectionDefectSplitter19_absorb_nearby_hitsERK9cluster_tRKNSt6vectorIN7larlite12larflow3dhitEEERNSt6vectorIiEEf"></span><span id="larflow::reco::ProjectionDefectSplitter::_absorb_nearby_hits__cluster_tCR.std::vector:larlite::larflow3dhit:CR.std::vector:i:R.float"></span><span class="target" id="classlarflow_1_1reco_1_1ProjectionDefectSplitter_1ab97a0ef704a96b19ccb594042803492d"></span><a class="reference internal" href="structlarflow_1_1reco_1_1cluster__t.html#_CPPv4N7larflow4reco9cluster_tE" title="larflow::reco::cluster_t">cluster_t</a> <code class="descname">_absorb_nearby_hits</code><span class="sig-paren">(</span><em class="property">const</em> <a class="reference internal" href="structlarflow_1_1reco_1_1cluster__t.html#_CPPv4N7larflow4reco9cluster_tE" title="larflow::reco::cluster_t">cluster_t</a> &amp;<em>cluster</em>, <em class="property">const</em> std::vector&lt;larlite::larflow3dhit&gt; &amp;<em>hit_v</em>, std::vector&lt;int&gt; &amp;<em>used_hits_v</em>, float <em>max_dist2line</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N7larflow4reco24ProjectionDefectSplitter19_absorb_nearby_hitsERK9cluster_tRKNSt6vectorIN7larlite12larflow3dhitEEERNSt6vectorIiEEf" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Because cluster is down on downsampled points at times, we absorb hits close to the cluster from the original set of hits. </p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd>A new cluster with additional hits added to the given cluster </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal notranslate"><span class="pre">cluster</span></code>: Cluster made with downsampled hits </li>
<li><code class="docutils literal notranslate"><span class="pre">hit_v</span></code>: The original (not-downsaampled) set of hits used to make the given cluster </li>
<li><code class="docutils literal notranslate"><span class="pre">used_hits_v</span></code>: Vector same size as hit_v where value is 1 if hit is already assigned to cluster. Hits assigned by this call of the function to the cluster will have their flags set to 1. </li>
<li><code class="docutils literal notranslate"><span class="pre">max_dist2line</span></code>: Maximum distance from a point to the first principle component axis of the given cluster. </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv4N7larflow4reco24ProjectionDefectSplitter12_runSplitterERKN7larlite18event_larflow3dhitERKNSt6vectorIN5larcv7Image2DEEERNSt6vectorIiEERNSt6vectorI9cluster_tEE">
<span id="_CPPv3N7larflow4reco24ProjectionDefectSplitter12_runSplitterERKN7larlite18event_larflow3dhitERKNSt6vectorIN5larcv7Image2DEEERNSt6vectorIiEERNSt6vectorI9cluster_tEE"></span><span id="_CPPv2N7larflow4reco24ProjectionDefectSplitter12_runSplitterERKN7larlite18event_larflow3dhitERKNSt6vectorIN5larcv7Image2DEEERNSt6vectorIiEERNSt6vectorI9cluster_tEE"></span><span id="larflow::reco::ProjectionDefectSplitter::_runSplitter__larlite::event_larflow3dhitCR.std::vector:larcv::Image2D:CR.std::vector:i:R.std::vector:cluster_t:R"></span><span class="target" id="classlarflow_1_1reco_1_1ProjectionDefectSplitter_1a996ef05e58d7d31737cd194e1067c8cf"></span>void <code class="descname">_runSplitter</code><span class="sig-paren">(</span><em class="property">const</em> larlite::event_larflow3dhit &amp;<em>inputhits</em>, <em class="property">const</em> std::vector&lt;larcv::Image2D&gt; &amp;<em>adc_v</em>, std::vector&lt;int&gt; &amp;<em>used_hits_v</em>, std::vector&lt;<a class="reference internal" href="structlarflow_1_1reco_1_1cluster__t.html#_CPPv4N7larflow4reco9cluster_tE" title="larflow::reco::cluster_t">cluster_t</a>&gt; &amp;<em>output_cluster_v</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N7larflow4reco24ProjectionDefectSplitter12_runSplitterERKN7larlite18event_larflow3dhitERKNSt6vectorIN5larcv7Image2DEEERNSt6vectorIiEERNSt6vectorI9cluster_tEE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>run 2d contour defect analysis </p>
<p>Our aim is to produce straight clusters that we can later piece together into tracks.</p>
<p>Given a set of hits, we first downsample (if needed). The downsampled hits are clustered. Hits for the clusters are projected into the 2D images. Those 2D pixels are used to make 2d contours. The 2D contours are split using defect analysis. Based on which space points are in which contours, the 3D cluster is split if the first second principle component is smaller.</p>
<p><dl class="docutils">
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal notranslate"><span class="pre">inputhits</span></code>: The input spacepoints in the form or larflow3dhit instances </li>
<li><code class="docutils literal notranslate"><span class="pre">adc_v</span></code>: The wire plane images </li>
<li><code class="docutils literal notranslate"><span class="pre">used_hits_v</span></code>: Vector same length as inputs which indicates if the hit has been assigned to a cluster. This function updates this vector. </li>
<li><code class="docutils literal notranslate"><span class="pre">output_cluster_v</span></code>: Vector of output clusters </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv4N7larflow4reco24ProjectionDefectSplitter20_defragment_clustersERNSt6vectorI9cluster_tEEKf">
<span id="_CPPv3N7larflow4reco24ProjectionDefectSplitter20_defragment_clustersERNSt6vectorI9cluster_tEEKf"></span><span id="_CPPv2N7larflow4reco24ProjectionDefectSplitter20_defragment_clustersERNSt6vectorI9cluster_tEEKf"></span><span id="larflow::reco::ProjectionDefectSplitter::_defragment_clusters__std::vector:cluster_t:R.floatC"></span><span class="target" id="classlarflow_1_1reco_1_1ProjectionDefectSplitter_1afec61dde3e5b6c58fe414b4b83f84dc0"></span>void <code class="descname">_defragment_clusters</code><span class="sig-paren">(</span>std::vector&lt;<a class="reference internal" href="structlarflow_1_1reco_1_1cluster__t.html#_CPPv4N7larflow4reco9cluster_tE" title="larflow::reco::cluster_t">cluster_t</a>&gt; &amp;<em>cluster_v</em>, <em class="property">const</em> float <em>max_2nd_pca_eigenvalue</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N7larflow4reco24ProjectionDefectSplitter20_defragment_clustersERNSt6vectorI9cluster_tEEKf" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>recluster clusters with large 2nd pca eigenvalues </p>
<p>this is meant to clean up clusters that have been split into many pieces which sometimes leaves weird clusters behind.</p>
<p><dl class="docutils">
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal notranslate"><span class="pre">cluster_v</span></code>: All the current clusters </li>
<li><code class="docutils literal notranslate"><span class="pre">max_2nd_pca_eigenvalue</span></code>: The maximum length of the second largest principle component </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Protected Attributes</p>
<dl class="member">
<dt id="_CPPv4N7larflow4reco24ProjectionDefectSplitter22_input_lfhit_tree_nameE">
<span id="_CPPv3N7larflow4reco24ProjectionDefectSplitter22_input_lfhit_tree_nameE"></span><span id="_CPPv2N7larflow4reco24ProjectionDefectSplitter22_input_lfhit_tree_nameE"></span><span id="larflow::reco::ProjectionDefectSplitter::_input_lfhit_tree_name__ss"></span><span class="target" id="classlarflow_1_1reco_1_1ProjectionDefectSplitter_1adafcc68afd6864de8c817378cf714d2f"></span>std::string <code class="descname">_input_lfhit_tree_name</code><a class="headerlink" href="#_CPPv4N7larflow4reco24ProjectionDefectSplitter22_input_lfhit_tree_nameE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>name of tree to get larflow hits to cluster </p>
</dd></dl>

<dl class="member">
<dt id="_CPPv4N7larflow4reco24ProjectionDefectSplitter25_output_cluster_tree_nameE">
<span id="_CPPv3N7larflow4reco24ProjectionDefectSplitter25_output_cluster_tree_nameE"></span><span id="_CPPv2N7larflow4reco24ProjectionDefectSplitter25_output_cluster_tree_nameE"></span><span id="larflow::reco::ProjectionDefectSplitter::_output_cluster_tree_name__ss"></span><span class="target" id="classlarflow_1_1reco_1_1ProjectionDefectSplitter_1a41d895b61a5cd1a204b230b2c51d2d12"></span>std::string <code class="descname">_output_cluster_tree_name</code><a class="headerlink" href="#_CPPv4N7larflow4reco24ProjectionDefectSplitter25_output_cluster_tree_nameE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>name of tree to store output clusters </p>
</dd></dl>

<dl class="member">
<dt id="_CPPv4N7larflow4reco24ProjectionDefectSplitter19_min_larmatch_scoreE">
<span id="_CPPv3N7larflow4reco24ProjectionDefectSplitter19_min_larmatch_scoreE"></span><span id="_CPPv2N7larflow4reco24ProjectionDefectSplitter19_min_larmatch_scoreE"></span><span id="larflow::reco::ProjectionDefectSplitter::_min_larmatch_score__float"></span><span class="target" id="classlarflow_1_1reco_1_1ProjectionDefectSplitter_1a8934b349532f454e5e1fc7293ad87d38"></span>float <code class="descname">_min_larmatch_score</code><a class="headerlink" href="#_CPPv4N7larflow4reco24ProjectionDefectSplitter19_min_larmatch_scoreE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>minimum larmatch score spacepoint must have to be included </p>
</dd></dl>

<dl class="member">
<dt id="_CPPv4N7larflow4reco24ProjectionDefectSplitter8_maxdistE">
<span id="_CPPv3N7larflow4reco24ProjectionDefectSplitter8_maxdistE"></span><span id="_CPPv2N7larflow4reco24ProjectionDefectSplitter8_maxdistE"></span><span id="larflow::reco::ProjectionDefectSplitter::_maxdist__float"></span><span class="target" id="classlarflow_1_1reco_1_1ProjectionDefectSplitter_1af7317f6cefcf026eeab0e0f5c416a9c4"></span>float <code class="descname">_maxdist</code><a class="headerlink" href="#_CPPv4N7larflow4reco24ProjectionDefectSplitter8_maxdistE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>maximum distance two spacepoints can be connected for dbscan </p>
</dd></dl>

<dl class="member">
<dt id="_CPPv4N7larflow4reco24ProjectionDefectSplitter8_minsizeE">
<span id="_CPPv3N7larflow4reco24ProjectionDefectSplitter8_minsizeE"></span><span id="_CPPv2N7larflow4reco24ProjectionDefectSplitter8_minsizeE"></span><span id="larflow::reco::ProjectionDefectSplitter::_minsize__i"></span><span class="target" id="classlarflow_1_1reco_1_1ProjectionDefectSplitter_1aba03cd7f082d00ed7668bc6882ba4375"></span>int <code class="descname">_minsize</code><a class="headerlink" href="#_CPPv4N7larflow4reco24ProjectionDefectSplitter8_minsizeE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>minimum cluster size for dbscan </p>
</dd></dl>

<dl class="member">
<dt id="_CPPv4N7larflow4reco24ProjectionDefectSplitter6_maxkdE">
<span id="_CPPv3N7larflow4reco24ProjectionDefectSplitter6_maxkdE"></span><span id="_CPPv2N7larflow4reco24ProjectionDefectSplitter6_maxkdE"></span><span id="larflow::reco::ProjectionDefectSplitter::_maxkd__i"></span><span class="target" id="classlarflow_1_1reco_1_1ProjectionDefectSplitter_1abcd40a5b2b61fe5d0194aff21990c8f0"></span>int <code class="descname">_maxkd</code><a class="headerlink" href="#_CPPv4N7larflow4reco24ProjectionDefectSplitter6_maxkdE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>max number of neighbors per spaecepoint for dbscan </p>
</dd></dl>

</div>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="classlarflow_1_1reco_1_1PyLArFlow.html" class="btn btn-neutral float-right" title="Class PyLArFlow" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="classlarflow_1_1reco_1_1NuVertexMaker.html" class="btn btn-neutral float-left" title="Class NuVertexMaker" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, NuTufts

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>